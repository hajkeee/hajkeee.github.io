GSF
https://www2.esky.se/booking/P39CQ7MU7MQ1551A4D5R/1?partner_id=GFSESKSE&gclid=ADowPOKeZEq32pY7mgSrygny7_UWoHg2X2UrhlnbUZWciE6kEhwT1JhFbJTLmKDhx7s-6aZ2hv0rpmB2chnLXFpJM6W3lLd-IQgPNO1g2o5S7QhU3jM&gclsrc=gf


/////link do reklamy na prod
https://www.esky.pl/?utm_source=google&utm_medium=cpc&utm_campaign=18804798668&utm_term=skyscanner&utm_content=706668376458&utm_placement=&utm_device=c&gclid=CjwKCAjwqKzEBhANEiwAeQaPVWTeq3PY6lxtsRcK07RhmRx18lPEXCh2W-eMZAs7raikg3d7-Z-EBBoC-dIQAvD_BwE&awc_src=CjwKCAjwqKzEBhANEiwAeQaPVWTeq3PY6lxtsRcK07RhmRx18lPEXCh2W-eMZAs7raikg3d7-Z-EBBoC-dIQAvD_BwE&gad_source=1&gad_campaignid=18804798668&gbraid=0AAAAAD3F2j4Nl0OE2uXLi_QikWGXFRv2A

////// kod
(() => {
  const customParamName = 'awc_src';

  const urlParams = new URLSearchParams(window.location.search);
  const gclidExists = urlParams.has('gclid');
  const customGclid = urlParams.get(customParamName);

  if (gclidExists || !customGclid) {
    console.log('GCLID already exists or custom param not found.');
    return;
  }

  const timestamp = Date.now();
  const cookieValue = '1.' + timestamp + '.' + customGclid;

  const expires = new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toUTCString(); // 90 days

  document.cookie = `_gcl_aw=${cookieValue}; expires=${expires}; path=/; domain=${location.hostname}; SameSite=Lax`;

  console.log(`Cookie _gcl_aw set: ${cookieValue}`);
})();




<script>
(function() {
  var customParamName = 'awc_src';
  var cookieName = '_gcl_aw';

  var urlParams = new URLSearchParams(window.location.search);
  var gclidExists = urlParams.has('gclid');
  var customGclid = urlParams.get(customParamName);

  // Restore cookie from localStorage if it has been deleted
  var existingCookie = document.cookie.split('; ').find(row => row.startsWith(cookieName + '='));
  var savedValue = localStorage.getItem(cookieName);

  if (!existingCookie && savedValue) {
    var expires = new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toUTCString(); // 90 days
    document.cookie = cookieName + '=' + savedValue +
                      '; expires=' + expires +
                      '; path=/' +
                      '; domain=' + location.hostname +
                      '; SameSite=Lax';
    console.log('[GTM] Cookie restored from localStorage:', savedValue);
    return;
  }

  // If cookie already exists or the custom parameter is missing, do nothing
  if (gclidExists || !customGclid) {
    return;
  }

  // Create a new cookie value
  var timestamp = Date.now();
  var cookieValue = '1.' + timestamp + '.' + customGclid;

  // Set the cookie
  var expires = new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toUTCString(); // 90 days
  document.cookie = cookieName + '=' + cookieValue +
                    '; expires=' + expires +
                    '; path=/' +
                    '; domain=' + location.hostname +
                    '; SameSite=Lax';

  // Save the same value in localStorage
  localStorage.setItem(cookieName, cookieValue);
  console.log('[GTM] Cookie and localStorage set:', cookieValue);
})();
</script>
